<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportar Um Problema BackOffice</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #123;
        }
        h2 {
            color: white;
            text-align: center;
            font-family: Arial, Helvetica, sans-serif;
        }
        p{
            color:  white;
            text-align: center;

        }
        form {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        select, textarea, input[type="file"] {
            width: 100%;
            margin-bottom: 16px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background: #007bff;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: green;
        }

        .logo {
  display: block;
  margin: 0 auto;
  border-radius: 50%;
  border-style: solid;
  color: white;
  padding: 50px white;
}
    </style>
</head>

<body>
    <h2>Reportar Um Problema BackOffice <br>Perdas</h2>
    <img class="logo" src="img/logo.jpg" alt="">
    <p><B>Grupo Partnership - Rio Verde/GO 2025</B></p>
    <form id="ssos-form">
        <label for="equipe">üöôEquipe:</label>
        <select id="equipe" name="equipe">
            <option value="RIOF001M">RIOF001M</option>
            <option value="RIOF002M">RIOF002M</option>
            <option value="RIOF003M">RIOF003M</option>
            <option value="RIOF004M">RIOF004M</option>
            <option value="RIOF005M">RIOF005M</option>
            <option value="RIOF006M">RIOF006M</option>
            <option value="RIOF007M">RIOF007M</option>
            <option value="RIOF008M">RIOF008M</option>
            <option value="RIOF009M">RIOF009M</option>
            <option value="RIOF10M">RIOF10M</option>
            <option value="RIOF11M">RIOF11M</option>
        </select>

        <label for="solicitacao">üìãProblema:</label>
        <select id="solicitacao" name="solicitacao">
            <option value="2020-Problema na Abertura de Turno">2020-Problema na Abertura de Turno‚ö†</option>
            <option value="2021-SS N√£o Caiu Para Minha Equipe">2021-SS N√£o Caiu Para Minha Equipe‚ö†</option>
            <option value="2022-N√£o Estou Conseguindo Lan√ßar Servi√ßos No Jupiter">2022-N√£o Estou Conseguindo Lan√ßar Servi√ßos No Jupiter‚ö†</option>
            <option value="2023-Problema no Fechamento de Turno">2023-Problema no Fechamento de Turno</option>
            <option value="2023-Outro Problema">2023-Outro Problema</option>
            
        </select>

        <label for="fotos">üì∑Tirar Foto:</label>
        <input type="file" id="fotos" name="fotos" accept="image/*" multiple capture="camera">

        <label for="printes">üì±Anexar Printe:</label>
        <input type="file" id="printes" name="printes" accept="image/*" multiple>

        <label for="observacao">‚úçüèªObserva√ß√£o:</label>
        <textarea id="observacao" name="observacao" rows="4" cols="50"></textarea>

        <button type="button" onclick="enviarWhatsApp()">Reportar Problema</button>
    </form>

    <script>
        function enviarWhatsApp() {
            var equipe = document.getElementById('equipe').value;
            var solicitacao = document.getElementById('solicitacao').value;
            var observacao = document.getElementById('observacao').value;
            var fotos = document.getElementById('fotos').files;
            var printes = document.getElementById('printes').files;

            var linkBase = 'https://api.whatsapp.com/send?phone=5564996151084&text=' +
                'Equipe: ' + equipe + '%0A' +
                'Solicita√ß√£o: ' + solicitacao + '%0A' +
                'Observa√ß√£o: ' + observacao;

            var uploadImagens = function(arquivos, callback) {
                var urls = [];
                var totalArquivos = arquivos.length;
                var arquivosEnviados = 0;

                for (var i = 0; i < totalArquivos; i++) {
                    var reader = new FileReader();
                    reader.onload = (function(readerIndex) {
                        return function(e) {
                            var base64Image = e.target.result.split(',')[1];
                            var imageUrl = 'https://api.imgbb.com/1/upload?key=a8a38c3afbdf5e80eb93015cc9d5e8ff';  // Sua chave de API

                            var formData = new FormData();
                            formData.append('image', base64Image);

                            fetch(imageUrl, {
                                method: 'POST',
                                body: formData
                            })
                            .then(response => response.json())
                            .then(data => {
                                if (data && data.data && data.data.url) {
                                    urls.push(data.data.url);
                                    arquivosEnviados++;
                                    if (arquivosEnviados === totalArquivos) {
                                        callback(urls);
                                    }
                                } else {
                                    throw new Error('Erro ao receber URL da imagem.');
                                }
                            })
                            .catch(error => {
                                console.error('Erro ao enviar a imagem:', error);
                                alert('Erro ao enviar a imagem. Tente novamente.');
                            });
                        };
                    })(i);
                    reader.readAsDataURL(arquivos[i]);
                }
            };

            var todasImagens = [...fotos, ...printes];
            if (todasImagens.length > 0) {
                uploadImagens(todasImagens, function(urls) {
                    var urlsImagens = urls.map(url => '%0AImagem: ' + url).join('');
                    var linkCompleto = linkBase + urlsImagens;
                    window.open(linkCompleto, '_blank');
                });
            } else {
                window.open(linkBase, '_blank');
            }
        }
    </script>
</body>
</html>